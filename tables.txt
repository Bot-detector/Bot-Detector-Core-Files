# coding: utf-8
from sqlalchemy import BigInteger, Column, DECIMAL, Date, DateTime, Float, ForeignKey, Index, Integer, String, TIMESTAMP, Table, Text, text
from sqlalchemy.dialects.mysql import TEXT, TINYINT, TINYTEXT, VARCHAR
from sqlalchemy.orm import relationship
from sqlalchemy.ext.declarative import declarative_base

Base = declarative_base()
metadata = Base.metadata


class Clan(Base):
    __tablename__ = 'Clan'

    id = Column(Integer, primary_key=True)
    member_id = Column(BigInteger, nullable=False)
    rank_id = Column(Integer, nullable=False)
    killcount = Column(Integer)


t_LabelJagex = Table(
    'LabelJagex', metadata,
    Column('id', Integer, nullable=False, server_default=text("'0'")),
    Column('label', String(50), nullable=False)
)


t_LabelSubGroup = Table(
    'LabelSubGroup', metadata,
    Column('id', Integer, nullable=False, server_default=text("'0'")),
    Column('parent_label', Integer, nullable=False),
    Column('child_label', Integer, nullable=False)
)


t_Labels = Table(
    'Labels', metadata,
    Column('id', Integer, nullable=False, server_default=text("'0'")),
    Column('label', VARCHAR(50), nullable=False)
)


class PlayerBotConfirmation(Base):
    __tablename__ = 'PlayerBotConfirmation'
    __table_args__ = (
        Index('Unique_player_label_bot', 'player_id', 'label_id', 'bot', unique=True),
    )

    id = Column(Integer, primary_key=True)
    ts = Column(TIMESTAMP, nullable=False, server_default=text("CURRENT_TIMESTAMP"))
    player_id = Column(Integer, nullable=False)
    label_id = Column(Integer, nullable=False)
    bot = Column(TINYINT(1), nullable=False)


t_Players = Table(
    'Players', metadata,
    Column('id', Integer, nullable=False, server_default=text("'0'")),
    Column('name', Text, nullable=False),
    Column('created_at', DateTime, nullable=False, server_default=text("CURRENT_TIMESTAMP")),
    Column('updated_at', DateTime),
    Column('possible_ban', TINYINT(1), nullable=False, server_default=text("'0'")),
    Column('confirmed_ban', TINYINT(1), nullable=False, server_default=text("'0'")),
    Column('confirmed_player', TINYINT(1), nullable=False, server_default=text("'0'")),
    Column('label_id', Integer, nullable=False, server_default=text("'0'")),
    Column('label_jagex', Integer, nullable=False, server_default=text("'0'")),
    Column('ironman', TINYINT),
    Column('hardcore_ironman', TINYINT),
    Column('ultimate_ironman', TINYINT)
)


class PlayersChange(Base):
    __tablename__ = 'PlayersChanges'

    id = Column(Integer, primary_key=True)
    ChangeDate = Column(TIMESTAMP, nullable=False, server_default=text("CURRENT_TIMESTAMP"))
    player_id = Column(Integer, nullable=False)
    name = Column(String(15), nullable=False)
    created_at = Column(DateTime, nullable=False)
    updated_at = Column(DateTime)
    possible_ban = Column(TINYINT(1), nullable=False, server_default=text("'0'"))
    confirmed_ban = Column(TINYINT(1), nullable=False, server_default=text("'0'"))
    confirmed_player = Column(TINYINT(1), nullable=False, server_default=text("'0'"))
    label_id = Column(Integer, nullable=False, index=True, server_default=text("'0'"))
    label_jagex = Column(Integer, nullable=False, server_default=text("'0'"))


t_Predictions = Table(
    'Predictions', metadata,
    Column('name', String(12), unique=True),
    Column('prediction', String(50)),
    Column('id', Integer, index=True),
    Column('created', TIMESTAMP),
    Column('Predicted_confidence', DECIMAL(5, 2)),
    Column('Agility_Thieving_bot', DECIMAL(5, 2)),
    Column('Agility_bot', DECIMAL(5, 2)),
    Column('Construction_Magic_bot', DECIMAL(5, 2)),
    Column('Construction_Prayer_bot', DECIMAL(5, 2)),
    Column('Cooking_bot', DECIMAL(5, 2)),
    Column('Crafting_bot', DECIMAL(5, 2)),
    Column('Fishing_Cooking_bot', DECIMAL(5, 2)),
    Column('Fishing_bot', DECIMAL(5, 2)),
    Column('Fletching_bot', DECIMAL(5, 2)),
    Column('Herblore_bot', DECIMAL(5, 2)),
    Column('Hunter_bot', DECIMAL(5, 2)),
    Column('Magic_bot', DECIMAL(5, 2)),
    Column('Mining_bot', DECIMAL(5, 2)),
    Column('PVM_Melee_bot', DECIMAL(5, 2)),
    Column('PVM_Ranged_Magic_bot', DECIMAL(5, 2)),
    Column('PVM_Ranged_bot', DECIMAL(5, 2)),
    Column('Real_Player', DECIMAL(5, 2)),
    Column('Runecrafting_bot', DECIMAL(5, 2)),
    Column('Smithing_bot', DECIMAL(5, 2)),
    Column('Thieving_bot', DECIMAL(5, 2)),
    Column('Woodcutting_bot', DECIMAL(5, 2)),
    Column('Zaff_BStaff_Bot', DECIMAL(5, 2)),
    Column('Zalcano_bot', DECIMAL(5, 2)),
    Column('mort_myre_fungus_bot', DECIMAL(5, 2))
)


class PredictionsFeedback(Base):
    __tablename__ = 'PredictionsFeedback'
    __table_args__ = (
        Index('Unique_Vote', 'prediction', 'subject_id', 'voter_id', unique=True),
    )

    id = Column(Integer, primary_key=True)
    ts = Column(TIMESTAMP, nullable=False, server_default=text("CURRENT_TIMESTAMP"))
    voter_id = Column(Integer, nullable=False, index=True)
    subject_id = Column(Integer, nullable=False, index=True)
    prediction = Column(String(50), nullable=False)
    confidence = Column(Float, nullable=False)
    vote = Column(Integer, nullable=False, server_default=text("'0'"))
    feedback_text = Column(TEXT)
    reviewed = Column(TINYINT, nullable=False, server_default=text("'0'"))
    reviewer_id = Column(Integer, index=True)
    user_notified = Column(TINYINT, nullable=False, server_default=text("'0'"))
    proposed_label = Column(String(50))


class Report(Base):
    __tablename__ = 'Reports'
    __table_args__ = (
        Index('idx_reportedID_regionDI', 'reportedID', 'region_id'),
        Index('Unique_Report', 'reportedID', 'reportingID', 'region_id', 'manual_detect', unique=True),
        Index('idx_heatmap', 'reportedID', 'timestamp', 'region_id')
    )

    ID = Column(BigInteger, primary_key=True)
    created_at = Column(TIMESTAMP, nullable=False, server_default=text("CURRENT_TIMESTAMP"))
    reportedID = Column(Integer, nullable=False)
    reportingID = Column(Integer, nullable=False, index=True)
    region_id = Column(Integer, nullable=False)
    x_coord = Column(Integer, nullable=False)
    y_coord = Column(Integer, nullable=False)
    z_coord = Column(Integer, nullable=False)
    timestamp = Column(TIMESTAMP, nullable=False, server_default=text("CURRENT_TIMESTAMP"))
    manual_detect = Column(TINYINT(1))
    on_members_world = Column(Integer)
    on_pvp_world = Column(TINYINT)
    world_number = Column(Integer)
    equip_head_id = Column(Integer)
    equip_amulet_id = Column(Integer)
    equip_torso_id = Column(Integer)
    equip_legs_id = Column(Integer)
    equip_boots_id = Column(Integer)
    equip_cape_id = Column(Integer)
    equip_hands_id = Column(Integer)
    equip_weapon_id = Column(Integer)
    equip_shield_id = Column(Integer)
    equip_ge_value = Column(BigInteger)


class Token(Base):
    __tablename__ = 'Tokens'

    id = Column(Integer, primary_key=True)
    player_name = Column(VARCHAR(50), nullable=False)
    token = Column(String(50), nullable=False)
    request_highscores = Column(TINYINT(1), nullable=False, server_default=text("'0'"))
    verify_ban = Column(TINYINT(1), nullable=False, server_default=text("'0'"))
    create_token = Column(TINYINT(1), nullable=False, server_default=text("'0'"))
    verify_players = Column(TINYINT(1), nullable=False, server_default=text("'0'"))
    discord_general = Column(TINYINT(1), nullable=False, server_default=text("'0'"))


class ApiPermission(Base):
    __tablename__ = 'apiPermissions'

    id = Column(Integer, primary_key=True)
    permission = Column(Text, nullable=False)


class ApiUser(Base):
    __tablename__ = 'apiUser'

    id = Column(Integer, primary_key=True)
    username = Column(TINYTEXT, nullable=False)
    token = Column(TINYTEXT, nullable=False)
    created_at = Column(DateTime, nullable=False, server_default=text("CURRENT_TIMESTAMP"))
    last_used = Column(DateTime)
    ratelimit = Column(Integer, nullable=False, server_default=text("'100'"))
    is_active = Column(TINYINT(1), nullable=False, server_default=text("'1'"))


class PlayerHiscoreDatum(Base):
    __tablename__ = 'playerHiscoreData'
    __table_args__ = (
        Index('Unique_player_time', 'timestamp', 'Player_id', unique=True),
        Index('Unique_player_date', 'Player_id', 'ts_date', unique=True)
    )

    id = Column(Integer, primary_key=True)
    timestamp = Column(DateTime, nullable=False, server_default=text("CURRENT_TIMESTAMP"))
    ts_date = Column(Date)
    Player_id = Column(Integer, nullable=False)
    total = Column(BigInteger)
    attack = Column(Integer)
    defence = Column(Integer)
    strength = Column(Integer)
    hitpoints = Column(Integer)
    ranged = Column(Integer)
    prayer = Column(Integer)
    magic = Column(Integer)
    cooking = Column(Integer)
    woodcutting = Column(Integer)
    fletching = Column(Integer)
    fishing = Column(Integer)
    firemaking = Column(Integer)
    crafting = Column(Integer)
    smithing = Column(Integer)
    mining = Column(Integer)
    herblore = Column(Integer)
    agility = Column(Integer)
    thieving = Column(Integer)
    slayer = Column(Integer)
    farming = Column(Integer)
    runecraft = Column(Integer)
    hunter = Column(Integer)
    construction = Column(Integer)
    league = Column(Integer)
    bounty_hunter_hunter = Column(Integer)
    bounty_hunter_rogue = Column(Integer)
    cs_all = Column(Integer)
    cs_beginner = Column(Integer)
    cs_easy = Column(Integer)
    cs_medium = Column(Integer)
    cs_hard = Column(Integer)
    cs_elite = Column(Integer)
    cs_master = Column(Integer)
    lms_rank = Column(Integer)
    soul_wars_zeal = Column(Integer)
    abyssal_sire = Column(Integer)
    alchemical_hydra = Column(Integer)
    barrows_chests = Column(Integer)
    bryophyta = Column(Integer)
    callisto = Column(Integer)
    cerberus = Column(Integer)
    chambers_of_xeric = Column(Integer)
    chambers_of_xeric_challenge_mode = Column(Integer)
    chaos_elemental = Column(Integer)
    chaos_fanatic = Column(Integer)
    commander_zilyana = Column(Integer)
    corporeal_beast = Column(Integer)
    crazy_archaeologist = Column(Integer)
    dagannoth_prime = Column(Integer)
    dagannoth_rex = Column(Integer)
    dagannoth_supreme = Column(Integer)
    deranged_archaeologist = Column(Integer)
    general_graardor = Column(Integer)
    giant_mole = Column(Integer)
    grotesque_guardians = Column(Integer)
    hespori = Column(Integer)
    kalphite_queen = Column(Integer)
    king_black_dragon = Column(Integer)
    kraken = Column(Integer)
    kreearra = Column(Integer)
    kril_tsutsaroth = Column(Integer)
    mimic = Column(Integer)
    nightmare = Column(Integer)
    phosanis_nightmare = Column(Integer)
    obor = Column(Integer)
    sarachnis = Column(Integer)
    scorpia = Column(Integer)
    skotizo = Column(Integer)
    tempoross = Column(Integer)
    the_gauntlet = Column(Integer)
    the_corrupted_gauntlet = Column(Integer)
    theatre_of_blood = Column(Integer)
    theatre_of_blood_hard = Column(Integer)
    thermonuclear_smoke_devil = Column(Integer)
    tzkal_zuk = Column(Integer)
    tztok_jad = Column(Integer)
    venenatis = Column(Integer)
    vetion = Column(Integer)
    vorkath = Column(Integer)
    wintertodt = Column(Integer)
    zalcano = Column(Integer)
    zulrah = Column(Integer)


class PlayerHiscoreDataChange(Base):
    __tablename__ = 'playerHiscoreDataChanges'

    id = Column(Integer, primary_key=True)
    playerHiscoreDataID = Column(Integer, nullable=False)
    old_player_id = Column(Integer, nullable=False)
    new_player_id = Column(Integer, nullable=False)
    old_total = Column(Integer, nullable=False)
    new_total = Column(Integer, nullable=False)
    change_at = Column(TIMESTAMP, nullable=False, server_default=text("CURRENT_TIMESTAMP"))


t_playerHiscoreDataLatest = Table(
    'playerHiscoreDataLatest', metadata,
    Column('id', Integer, nullable=False, server_default=text("'0'")),
    Column('timestamp', DateTime, nullable=False, server_default=text("CURRENT_TIMESTAMP")),
    Column('ts_date', Date),
    Column('Player_id', Integer, nullable=False),
    Column('total', BigInteger),
    Column('attack', Integer),
    Column('defence', Integer),
    Column('strength', Integer),
    Column('hitpoints', Integer),
    Column('ranged', Integer),
    Column('prayer', Integer),
    Column('magic', Integer),
    Column('cooking', Integer),
    Column('woodcutting', Integer),
    Column('fletching', Integer),
    Column('fishing', Integer),
    Column('firemaking', Integer),
    Column('crafting', Integer),
    Column('smithing', Integer),
    Column('mining', Integer),
    Column('herblore', Integer),
    Column('agility', Integer),
    Column('thieving', Integer),
    Column('slayer', Integer),
    Column('farming', Integer),
    Column('runecraft', Integer),
    Column('hunter', Integer),
    Column('construction', Integer),
    Column('league', Integer),
    Column('bounty_hunter_hunter', Integer),
    Column('bounty_hunter_rogue', Integer),
    Column('cs_all', Integer),
    Column('cs_beginner', Integer),
    Column('cs_easy', Integer),
    Column('cs_medium', Integer),
    Column('cs_hard', Integer),
    Column('cs_elite', Integer),
    Column('cs_master', Integer),
    Column('lms_rank', Integer),
    Column('soul_wars_zeal', Integer),
    Column('abyssal_sire', Integer),
    Column('alchemical_hydra', Integer),
    Column('barrows_chests', Integer),
    Column('bryophyta', Integer),
    Column('callisto', Integer),
    Column('cerberus', Integer),
    Column('chambers_of_xeric', Integer),
    Column('chambers_of_xeric_challenge_mode', Integer),
    Column('chaos_elemental', Integer),
    Column('chaos_fanatic', Integer),
    Column('commander_zilyana', Integer),
    Column('corporeal_beast', Integer),
    Column('crazy_archaeologist', Integer),
    Column('dagannoth_prime', Integer),
    Column('dagannoth_rex', Integer),
    Column('dagannoth_supreme', Integer),
    Column('deranged_archaeologist', Integer),
    Column('general_graardor', Integer),
    Column('giant_mole', Integer),
    Column('grotesque_guardians', Integer),
    Column('hespori', Integer),
    Column('kalphite_queen', Integer),
    Column('king_black_dragon', Integer),
    Column('kraken', Integer),
    Column('kreearra', Integer),
    Column('kril_tsutsaroth', Integer),
    Column('mimic', Integer),
    Column('nightmare', Integer),
    Column('phosanis_nightmare', Integer),
    Column('obor', Integer),
    Column('sarachnis', Integer),
    Column('scorpia', Integer),
    Column('skotizo', Integer),
    Column('Tempoross', Integer, nullable=False),
    Column('the_gauntlet', Integer),
    Column('the_corrupted_gauntlet', Integer),
    Column('theatre_of_blood', Integer),
    Column('theatre_of_blood_hard', Integer),
    Column('thermonuclear_smoke_devil', Integer),
    Column('tzkal_zuk', Integer),
    Column('tztok_jad', Integer),
    Column('venenatis', Integer),
    Column('vetion', Integer),
    Column('vorkath', Integer),
    Column('wintertodt', Integer),
    Column('zalcano', Integer),
    Column('zulrah', Integer)
)


class PlayerHiscoreDataXPChange(Base):
    __tablename__ = 'playerHiscoreDataXPChange'

    id = Column(Integer, primary_key=True)
    timestamp = Column(DateTime, nullable=False, server_default=text("CURRENT_TIMESTAMP"))
    ts_date = Column(Date)
    Player_id = Column(Integer, nullable=False, index=True)
    total = Column(BigInteger)
    attack = Column(Integer)
    defence = Column(Integer)
    strength = Column(Integer)
    hitpoints = Column(Integer)
    ranged = Column(Integer)
    prayer = Column(Integer)
    magic = Column(Integer)
    cooking = Column(Integer)
    woodcutting = Column(Integer)
    fletching = Column(Integer)
    fishing = Column(Integer)
    firemaking = Column(Integer)
    crafting = Column(Integer)
    smithing = Column(Integer)
    mining = Column(Integer)
    herblore = Column(Integer)
    agility = Column(Integer)
    thieving = Column(Integer)
    slayer = Column(Integer)
    farming = Column(Integer)
    runecraft = Column(Integer)
    hunter = Column(Integer)
    construction = Column(Integer)
    league = Column(Integer)
    bounty_hunter_hunter = Column(Integer)
    bounty_hunter_rogue = Column(Integer)
    cs_all = Column(Integer)
    cs_beginner = Column(Integer)
    cs_easy = Column(Integer)
    cs_medium = Column(Integer)
    cs_hard = Column(Integer)
    cs_elite = Column(Integer)
    cs_master = Column(Integer)
    lms_rank = Column(Integer)
    soul_wars_zeal = Column(Integer)
    abyssal_sire = Column(Integer)
    alchemical_hydra = Column(Integer)
    barrows_chests = Column(Integer)
    bryophyta = Column(Integer)
    callisto = Column(Integer)
    cerberus = Column(Integer)
    chambers_of_xeric = Column(Integer)
    chambers_of_xeric_challenge_mode = Column(Integer)
    chaos_elemental = Column(Integer)
    chaos_fanatic = Column(Integer)
    commander_zilyana = Column(Integer)
    corporeal_beast = Column(Integer)
    crazy_archaeologist = Column(Integer)
    dagannoth_prime = Column(Integer)
    dagannoth_rex = Column(Integer)
    dagannoth_supreme = Column(Integer)
    deranged_archaeologist = Column(Integer)
    general_graardor = Column(Integer)
    giant_mole = Column(Integer)
    grotesque_guardians = Column(Integer)
    hespori = Column(Integer)
    kalphite_queen = Column(Integer)
    king_black_dragon = Column(Integer)
    kraken = Column(Integer)
    kreearra = Column(Integer)
    kril_tsutsaroth = Column(Integer)
    mimic = Column(Integer)
    nightmare = Column(Integer)
    obor = Column(Integer)
    sarachnis = Column(Integer)
    scorpia = Column(Integer)
    skotizo = Column(Integer)
    Tempoross = Column(Integer, nullable=False)
    the_gauntlet = Column(Integer)
    the_corrupted_gauntlet = Column(Integer)
    theatre_of_blood = Column(Integer)
    theatre_of_blood_hard = Column(Integer)
    thermonuclear_smoke_devil = Column(Integer)
    tzkal_zuk = Column(Integer)
    tztok_jad = Column(Integer)
    venenatis = Column(Integer)
    vetion = Column(Integer)
    vorkath = Column(Integer)
    wintertodt = Column(Integer)
    zalcano = Column(Integer)
    zulrah = Column(Integer)


t_regionIDNames = Table(
    'regionIDNames', metadata,
    Column('entry_ID', Integer, nullable=False, server_default=text("'0'")),
    Column('region_ID', Integer, nullable=False),
    Column('z_axis', Integer, server_default=text("'0'")),
    Column('region_name', Text, nullable=False)
)


class ReportLatest(Base):
    __tablename__ = 'reportLatest'

    report_id = Column(BigInteger)
    created_at = Column(TIMESTAMP, server_default=text("CURRENT_TIMESTAMP"))
    reported_id = Column(Integer, primary_key=True)
    region_id = Column(Integer, nullable=False)
    x_coord = Column(Integer, nullable=False)
    y_coord = Column(Integer, nullable=False)
    z_coord = Column(Integer, nullable=False)
    timestamp = Column(TIMESTAMP, nullable=False)
    on_members_world = Column(Integer)
    world_number = Column(Integer)
    equip_head_id = Column(Integer)
    equip_amulet_id = Column(Integer)
    equip_torso_id = Column(Integer)
    equip_legs_id = Column(Integer)
    equip_boots_id = Column(Integer)
    equip_cape_id = Column(Integer)
    equip_hands_id = Column(Integer)
    equip_weapon_id = Column(Integer)
    equip_shield_id = Column(Integer)
    equip_ge_value = Column(BigInteger)


class SentToJagex(Base):
    __tablename__ = 'sentToJagex'

    entry = Column(Integer, primary_key=True)
    name = Column(Text, nullable=False)


class ApiUsage(Base):
    __tablename__ = 'apiUsage'

    id = Column(BigInteger, primary_key=True)
    user_id = Column(ForeignKey('apiUser.id', ondelete='RESTRICT', onupdate='RESTRICT'), nullable=False, index=True)
    timestamp = Column(TIMESTAMP, nullable=False, server_default=text("CURRENT_TIMESTAMP"))
    route = Column(Text, nullable=False)

    user = relationship('ApiUser')


class ApiUserPerm(Base):
    __tablename__ = 'apiUserPerms'

    id = Column(Integer, primary_key=True)
    user_id = Column(ForeignKey('apiUser.id', ondelete='RESTRICT', onupdate='RESTRICT'), nullable=False, index=True)
    permission_id = Column(ForeignKey('apiPermissions.id', ondelete='RESTRICT', onupdate='RESTRICT'), nullable=False, index=True)

    permission = relationship('ApiPermission')
    user = relationship('ApiUser')
